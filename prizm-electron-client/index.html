<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light dark" />
    <title>Prizm</title>
    <style>
      * {
        box-sizing: border-box;
      }
      html {
        height: 100%;
        overflow: hidden;
      }
      body {
        margin: 0;
        height: 100%;
        min-height: 100vh;
        overflow: hidden;
      }
      /* 默认跟随系统主题（auto 模式 & nativeTheme.themeSource='system' 时生效） */
      @media (prefers-color-scheme: dark) {
        html:not([data-theme]),
        html:not([data-theme]) body {
          background-color: #000;
          color: #fff;
        }
      }
      @media (prefers-color-scheme: light) {
        html:not([data-theme]),
        html:not([data-theme]) body {
          background-color: #fff;
          color: #000;
        }
      }
      /* 手动主题覆盖（由内联脚本设置 data-theme 属性） */
      html[data-theme='dark'],
      html[data-theme='dark'] body {
        background-color: #000;
        color: #fff;
      }
      html[data-theme='light'],
      html[data-theme='light'] body {
        background-color: #fff;
        color: #000;
      }
      #app {
        height: 100%;
        min-height: 0;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }
    </style>
    <script>
      // 同步读取用户主题偏好，在首次绘制前应用正确的背景色
      // 主要由 Electron nativeTheme.themeSource 处理，此处作为兜底
      ;(function () {
        try {
          var mode = localStorage.getItem('prizm.client.themeMode')
          if (mode === 'dark' || mode === 'light') {
            document.documentElement.dataset.theme = mode
            var meta = document.querySelector('meta[name="color-scheme"]')
            if (meta) meta.content = mode
          }
        } catch (e) {}
      })()
    </script>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
